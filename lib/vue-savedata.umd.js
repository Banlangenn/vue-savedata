!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self)["vue-savedata"]=e["vue-savedata"]||{},e["vue-savedata"].umd=t())}(this,function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function r(r){for(var o=1;arguments.length>o;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(n,!0).forEach(function(t){e(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(n).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}return function(){var{SS:e=null,LS:t=null,saveName:o="saveData",mode:n="LS",MMD:a=2,ciphertext:c=!1,encode:i=(e=>window.btoa(encodeURIComponent(JSON.stringify(e)))),decode:s=(e=>JSON.parse(decodeURIComponent(window.atob(e)))),setState:l=((e,t)=>{e=c?i(e):JSON.stringify(e),window[t].setItem(o,e)}),getState:u=(e=>{try{var t=window[e].getItem(o);return t?c?s(t):JSON.parse(t):null}catch(e){return null}}),checkParams:f=(e=>!(!e.hasOwnProperty("storePath")||!e.hasOwnProperty("module"))||(console.warn("SS,LS的key约定必须包含storePath、module"),!1)),deepMerge:p=((e,t,r)=>{if(!r)return t;for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=e[o]&&"[object Object]"===Object.prototype.toString.call(e[o])?p(e[o],t[o],--r):e[o]=t[o]);return e})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function d(e,t,r){if(e){var o=RegExp("^".concat(r,"/"));return t.replace(o,"")}return t}function y(e,t,o){var n=null;for(var a of e){var c=d(a.module.namespaced,t.type,a.storePath);Object.prototype.hasOwnProperty.call(a.module.mutations,c)&&(n=r({},n,{[a.storePath]:o[a.storePath]}))}return n}return o=>{var c,i=!e||Array.isArray(e)?e:[e],s=!t||Array.isArray(t)?t:[t],d=null,S=null;if(s){for(var b of s)if(!f(b)){s=null;break}s&&(S=c=u("localStorage"))}if(i){for(var O of i)if(!f(O)){i=null;break}i&&(d=u("sessionStorage"),c=S?r({},S,{},d):d)}s||i||(c=u("".concat("SS"!==n?"localStorage":"sessionStorage"))),c&&o.replaceState(p(o.state,c,a+1)),o.subscribe((o,a)=>{if(s){var c=y(s,o,a);if(c&&(S=r({},S,{},c),l(S,"localStorage")),!i)return}if(i){var u=y(i,o,a);u&&(d=r({},d,{},u),l(d,"sessionStorage"))}else!t&&!e&&l(a,"".concat("SS"!==n?"localStorage":"sessionStorage"))})}}});
